!function(t){t.fn.shortslider=function(e){function i(){if("fade"==o.style){var t=b-1;c.find("ul li").eq(t).hasClass("currentItem")||(c.find("ul li").removeClass("currentItem").fadeOut(500),c.find("ul li").eq(t).addClass("currentItem").fadeIn(500,function(){1==o.flick&&c.find("ul li").not(":animated").css({left:0})}))}else c.find("ul li").removeClass("currentItem"),"carousel"==o.style?(c.find("ul li").eq(b).addClass("currentItem"),I=b*u,(1!=b||b!=v)&&c.find("ul").stop().animate({left:-I})):(c.find("ul li").eq(b-1).addClass("currentItem"),I=b*u-u,c.find("ul").stop().animate({left:-I}));c.find(".indicator span").removeClass("current"),c.find(".indicator span").eq(b-1).addClass("current")}function n(){if(1==o.auto)if(1==o.rand){var t=b;s(t),i()}else v>b?(b++,i()):(b=1,"carousel"==o.style?(I=u*v+u,c.find("ul").stop().animate({left:-I},function(){c.find("ul").stop().css({left:-u})}),c.find(".indicator span").removeClass("current"),c.find(".indicator span").eq(0).addClass("current")):i())}function s(t){b=Math.round(Math.random()*v),b==t&&s(t),0==b&&s(t)}function a(){var e=t('<span class="prev" style=" top:50%; opacity:0;"></span><span class="next" style=" top:50%; opacity:0;"></span>').appendTo(c.find(o.itemDisplay));setTimeout(function(){e.remove()},400)}function l(){function t(t){var e=t.touches[0];"touchstart"==t.type&&(clearInterval(C),I=parseInt(s.css("left").replace("px","")),a=e.pageX,l=e.pageY),"touchmove"==t.type&&(r=e.pageX,d=e.pageY,f=r-a,p=d-l,moveRate=f/p,moveRate>Math.tan(30*Math.PI/180)&&t.preventDefault(),"fade"==o.style?s.find("li.currentItem").css({left:(f+I)/5}):s.css({left:f+I})),"touchend"==t.type&&(clearInterval(C),-50>f?b+=1:f>50?b-=1:("fade"==o.style&&s.find("li.currentItem").stop().animate({left:0}),s.stop().animate({left:I})),b>v?"fade"==o.style?(c.find(".indicator span").removeClass("current"),c.find(".indicator span").eq(1).addClass("current"),b=1,i()):"carousel"==o.style?(c.find("ul").stop().animate({left:-u*v-u},function(){c.find("ul").stop().css({left:-u})}),c.find(".indicator span").removeClass("current"),c.find(".indicator span").eq(0).addClass("current"),b=1):(s.stop().animate({left:I}),b=v):1>b?("fade"==o.style?(c.find(".indicator span").removeClass("current"),c.find(".indicator span").eq(v-1).addClass("current"),b=v,i()):"carousel"==o.style?(s.stop().animate({left:0},function(){s.css({left:-v*u})}),c.find(".indicator span").removeClass("current"),c.find(".indicator span").eq(v-1).addClass("current")):s.stop().animate({left:I}),"carousel"==o.style?b=v:"fade"==!o.style&&(b=1)):i(),f=0,C=setInterval(n,o.speed))}var e=c.find("ul")[0],s=c.find("ul");e.addEventListener("touchstart",t,!1),e.addEventListener("touchmove",t,!1),e.addEventListener("touchend",t,!1);var a,l,r,d,f,p}var r,d={itemDisplay:".itemDisplay",style:"nomal",flick:!0,rand:!1,hoverStop:!0,speed:5e3,auto:!0,indicator:!0,indicatorStyle:!0,PrevNext:!0,PrevNextStyle:!0};if(thisID=null!=this.attr("id")?"#"+this.attr("id"):"",r=null!=this.attr("class")?"."+this.attr("class").replace(/ /g,"."):"",thisSelector=thisID+r,0===this.length)return this;if(this.length>1)return this.each(function(){t(this).shortslider(e)}),this;var o=t.extend(d,e),c=this;c.children("ul").addClass("shortSliderUL").wrap('<div class="itemDisplay"></div>');var f=c.find(" li:first-child img:first").clone().prependTo(c.find(o.itemDisplay)).css({zIndex:-10,visibility:"hidden",width:"100%",display:"block"}).addClass("sizer");if(0==f.length){var p='<img src="http://dummyimage.com/300x200/000/fff" style="z-index:-10;visibility:hidden;width:100%;display:block;" class="sizer">';c.find(o.itemDisplay).prepend(t(p))}var u=c.find(o.itemDisplay).width();if("carousel"==o.style)var h=u;else var h=0;t(window).bind("resize load",function(){u=c.find(o.itemDisplay).width(),i(),c.find("ul li").css({width:u}),1==o.PrevNext;var t=c.find(o.itemDisplay).height();0==f.length&&c.find("ul.shortSliderUL li").css({height:t})}),c.find("ul li").css({width:u}),c.find("ul").css({width:99999,left:-h,position:"absolute",top:0}),c.find("ul li").css({"float":"left"});var v=c.find("ul li").length;if(t(o.itemDisplay).css({overflow:"hidden",position:"relative"}),"carousel"==o.style){var m=c.find("ul li:first-child").clone(),y=c.find("ul li:last-child").clone();c.find("ul").append(m),c.find("ul").prepend(y),c.find("ul li:first-child").addClass("lastItem"),c.find("ul li:last-child").addClass("firstItem")}if(1==o.indicator&&v>1){for(var x=t('<div class="indicator"></div>').appendTo(c),g=0;v>g;g++)x.append("<span>"+parseInt(g+1)+"</span>");1==o.indicatorStyle&&t("body").append('<style type="text/css">'+thisSelector+" .indicator { text-align:center; text-align:center; width:100%; height: 0; position:relative; top:-30px;} "+thisSelector+" .indicator span { display:inline-block; width:10px; height:10px; text-indent:-9999px; margin:5px; vertical-align:top; cursor:pointer; border-radius:50%; background-color:#999;} "+thisSelector+" .indicator span.current { background-color:#333;}")}1==o.PrevNext&&v>1&&(t('<a class="prev" href="">prev</a><a class="next" href="">next</a>').appendTo(c.find(o.itemDisplay)),1==o.PrevNextStyle&&(c.find(o.itemDisplay).height(),t("body").append('<style type="text/css">'+thisSelector+" { position:relative;} "+thisSelector+" .prev { position:absolute; display:block; width:30px; height:30px; top:50%; margin-top:-15px; left:10px; text-indent:-9999px; background:#333; border-radius:50%;} "+thisSelector+" .next { position:absolute; display:block; width:30px; height:30px; top:50%; margin-top:-15px; right:10px; text-indent:-9999px; background:#333; border-radius:50%;} "+thisSelector+' .prev:after { content:""; display:block; position:absolute; top:10px; left:4px; border:solid 5px; border-color:transparent; border-right:solid 9px #fff;} '+thisSelector+' .next:after { content:""; display:block; position:absolute; top:10px; right:4px; border:solid 5px; border-color:transparent; border-left:solid 9px #fff;}</style>')));var I,b=1;"fade"==o.style?(c.find("ul li").css({position:"absolute",display:"none"}),c.find(".indicator span:first-child").addClass("current"),c.find("ul li:first-child").addClass("currentItem").fadeIn(500)):(c.find(".indicator span:first-child").addClass("current"),"carousel"==o.style?c.find("ul li:nth-child(2)").addClass("currentItem"):c.find("ul li:first-child").addClass("currentItem"));var C=setInterval(n,o.speed);return 1==o.hoverStop&&c.find("ul").hover(function(){clearInterval(C)},function(){C=setInterval(n,o.speed)}),c.find(".indicator span").click(function(){clearInterval(C);var t=c.find(".indicator span").index(this);b=t+1,i(),C=setInterval(n,o.speed)}),c.find("a.prev").click(function(){return a(),clearInterval(C),1==b?(b=v,"carousel"==o.style?(I=0,c.find("ul").stop().animate({left:I},function(){c.find("ul").stop().css({left:-b*u})}),c.find(".indicator span").removeClass("current"),c.find(".indicator span").eq(v-1).addClass("current")):i()):(b-=1,i()),C=setInterval(n,o.speed),!1}),c.find("a.next").click(function(){return a(),clearInterval(C),b==v?(b=1,"carousel"==o.style?(I=u*v+u,c.find("ul").stop().animate({left:-I},function(){c.find("ul").stop().css({left:-u})}),c.find(".indicator span").removeClass("current"),c.find(".indicator span").eq(0).addClass("current")):i()):(b+=1,i()),C=setInterval(n,o.speed),!1}),1==o.flick&&l(),this}}(jQuery);